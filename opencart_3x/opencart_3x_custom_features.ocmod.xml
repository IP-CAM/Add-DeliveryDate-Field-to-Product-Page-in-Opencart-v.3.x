<?xml version="1.0" encoding="utf-8"?>
<modification>
    <name>
		Opencart 3x Custom Features
    </name>
    <code>
		opencart_3x_custom_code
    </code>
    <version>
		0.0.4
    </version>
    <author>
		Max Borschev
    </author>
    <link>
		https://github.com/ZloyDeDD
    </link>
    <!--
	START;
	
	На странице товара вместо названия производителя выводится изображение
	-->
    <file path="catalog/controller/product/product.php">
        <operation>
            <search>
                <![CDATA[$data['options'] = array();]]>
            </search>
            <add position="after">
                <![CDATA[
				$data['manufacturer_logo'] = '';
				
				$data['manufacturer_name'] = '';
				
				if (!empty($product_info['manufacturer_id'])) {
				$manufacturer_info = $this->model_catalog_manufacturer->getManufacturer($product_info['manufacturer_id']);
				
				if ($manufacturer_info) {
				$data['manufacturer_logo'] = $this->model_tool_image->resize($manufacturer_info['image'], 150, 150);
				
				$data['manufacturer_name'] = html_entity_decode($manufacturer_info['name'], ENT_QUOTES, 'UTF-8');
				}
				}
				]]>
            </add>
        </operation>
    </file>
    <file path="catalog/view/theme/oct_ultrastore/template/product/product.twig">
        <operation>
            <search>
                <![CDATA[{{ manufacturer }}]]>
            </search>
            <add position="replace">
                <![CDATA[
				{% if manufacturer_logo and manufacturer_name %}
				<img src="{{ manufacturer_logo }}" alt="{{ manufacturer_name }}">
				{% else %}
				{{ manufacturer }}
				{% endif %}
				]]>
            </add>
        </operation>
    </file>
    <!--
	END;
	
	На странице товара вместо названия производителя выводится изображение
	-->
    <!--
	START;
	
	Убирает модификацию шаблона Ultrastore, которая добавляет к тегам <img> класс 'img-fluid' в описании у страниц информации
	-->
    <file path="catalog/controller/information/information.php">
        <operation>
            <search>
                <![CDATA[$data['description'] = str_replace("<img", "<img class='img-fluid'", $data['description']);]]>
            </search>
            <add position="replace">
                <![CDATA[$data['description'] = html_entity_decode($information_info['description'], ENT_QUOTES, 'UTF-8');]]>
            </add>
        </operation>
    </file>
    <!--
	END;
	
	Убирает модификацию шаблона Ultrastore, которая добавляет к тегам <img> класс 'img-fluid' в описании у страниц информации
	-->

    <!--
	START;
	
	Убирает копирайт Opencart
	-->
    <file path="catalog/controller/common/footer.php">
        <operation>
            <search>
                <![CDATA[$data['powered'] = sprintf($this->language->get('text_powered'), $this->config->get('config_name'), date('Y', time()));]]>
            </search>
            <add position="replace">
                <![CDATA[$data['powered'] = sprintf($this->config->get('config_name'), date('Y', time()));]]>
            </add>
        </operation>
    </file>
    <!--
	END;
	
	Убирает копирайт Opencart
	-->
</modification>
